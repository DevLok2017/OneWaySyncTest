trigger:
  branches:
    include:
      - main  # Adjust if your Azure branch is named differently

pool:
  vmImage: ubuntu-latest

variables:
  GITHUB_USERNAME: 'DevLok2017'                # Your GitHub username
  GITHUB_REPO: 'OneWaySyncTest'                # Updated repo name

steps:
  - checkout: self

  - script: |
      echo "Adding GitHub remote..."
      git remote add github https://$(GITHUB_USERNAME):$(GITHUB_TOKEN)@github.com/$(GITHUB_USERNAME)/$(GITHUB_REPO).git
      
      echo "Force-pushing main branch to GitHub..."
      git push -f github HEAD:refs/heads/main
    displayName: 'Force-push main branch to GitHub'